@using PiF.Models
@model CompletePiFModel

@section scripts
{
    <script type="text/javascript">
        function error_handler(e) {
            if (e.errors) {
                var message = "Errors:\n";
                $.each(e.errors, function (key, value) {
                    if ('errors' in value) {
                        $.each(value.errors, function () {
                            message += this + "\n";
                        });
                    }
                });
                alert(message);
            }
        }
    </script>
}

@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title</h1>
            </hgroup>
            <p>Once you have </p>
        </div>
    </section>
}

@(Html.Kendo().Grid<PiFGameComplete>().Name("CompleteGrid").DataSource(dataSource => dataSource.Ajax().Events(events => events.Error("error_handler"))
    .Model(model => model.Id(p => p.ID)).Read(read => read.Action("Read", "CompleteGrid")).Update(update => update.Action("Update", "CompleteGrid"))
    .Destroy(update => update.Action("Delete", "CompleteGrid"))).HtmlAttributes(new { style = "height: 466px;" }).Columns(columns =>
      {
          columns.Bound(p => p.SteamID).Title("Steam ID").Width(80);
          columns.Bound(p => p.Name).Width(350);
          columns.Bound(p => p.WinnerUserName).Width(200).EditorTemplateName("GameList");
          columns.Bound(p => p.PointWorth).Width(80);

          columns.Command(commands =>
              {
                  commands.Edit();
                  commands.Destroy();
              }).Width(180);
      }).Editable(editing => editing.Mode(GridEditMode.InLine)).Pageable().Scrollable().Sortable().BindTo(SessionCompleteGamesRepository.All()))
@using (Html.BeginForm())
{
    <br />
    <input type="submit" value="Complete PiF" class="button-blue"/>
}